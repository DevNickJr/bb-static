(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8028],{2918:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/cms",function(){return t(5447)}])},7081:function(e,a,t){"use strict";var l=t(5893);t(7294);let s=e=>{let{children:a,className:t,gradient:s,...n}=e;return(0,l.jsx)("button",{className:"".concat(s||"grad-to-right","  ").concat(t||""),...n,children:a})};a.Z=s},7403:function(e,a,t){"use strict";var l=t(3977),s=t(6650);let n=(0,l.ZF)({apiKey:"AIzaSyA_RWmWVRuQC-785kQ40sEdwNnz6Yb6sBM",authDomain:"brilliant-brains-7e04f.firebaseapp.com",projectId:"brilliant-brains-7e04f",storageBucket:"brilliant-brains-7e04f.appspot.com",messagingSenderId:"838066145252",appId:"1:838066145252:web:503b26af450ef5b3dd69f1"}),o=(0,s.cF)(n);a.Z=o},1926:function(e,a,t){"use strict";var l=t(7294),s=t(6650),n=t(7403),o=t(7632);let r=()=>{let[e,a]=(0,l.useState)(null),[t,r]=(0,l.useState)(!1),[i,d]=(0,l.useState)(null),[c,u]=(0,l.useState)(null),m=(0,o.Z)(),x=e=>{a(null),d(0),r(!0);let t=(0,s.iH)(n.Z,"images/".concat(m)),l=(0,s.B0)(t,e);l.on("state_changed",e=>{let a=e.bytesTransferred/e.totalBytes*100;switch(d(a),console.log("Upload is "+a+"% done"),e.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running")}},e=>{a(null==e?void 0:e.message),r(!1),console.log("error",e)},()=>{a(null),d(100),r(!1),(0,s.Jt)(l.snapshot.ref).then(e=>{console.log("File available at",e),u(e)})})};return{url:c,uploadImage:x,error:e,progress:i,setError:a,loading:t,setUrl:u}};a.Z=r},5447:function(e,a,t){"use strict";t.r(a);var l=t(5893),s=t(7294),n=t(9008),o=t.n(n),r=t(8705),i=t(2396),d=t(7081),c=t(1163),u=t(3029),m=t(2920),x=t(1974),h=t(1926),p=t(5675),g=t.n(p);let b={_id:null,hero:{header:"",text:"",image:""},about:{header:"",text:"",image:""}},f=()=>{var e,a,t,n,i,p,f,v;let[j,y]=(0,s.useState)(!1),[N,k]=(0,s.useReducer)((e,a)=>"update"===a.type&&"string"!=typeof a.payload?{...e,...a.payload}:{...e,[a.type]:a.payload},b),{url:w,uploadImage:_,error:Z,progress:S,setError:C,loading:E}=(0,h.Z)(),{url:L,uploadImage:F,error:I,loading:B}=(0,h.Z)();console.log({cms:N}),(0,c.useRouter)();let{loading:T,error:U,data:A,post:H}=(0,u.Z)({api:"/cms/".concat((null==N?void 0:N._id)||""),method:"PATCH",onSuccess:()=>{(0,m.Am)("Updated successfully")}}),q=e=>{e.preventDefault(),H({about:N.about})},z=e=>{e.preventDefault(),H({hero:N.hero})};return(0,s.useEffect)(()=>{w&&k({type:"hero",payload:{...N.hero,image:w}})},[w]),(0,s.useEffect)(()=>{L&&k({type:"about",payload:{...N.about,image:L}})},[L]),(0,s.useEffect)(()=>{let e=async()=>{try{y(!0);let e=await fetch("/api/cms"),a=await e.json();if(!e.ok)throw Error(a.message);console.log({data:a}),k({type:"update",payload:a[0]})}catch(e){console.log({error:e})}y(!1)};e()},[]),(0,l.jsxs)(r.Z,{children:[(0,l.jsxs)(o(),{children:[(0,l.jsx)("title",{children:"Brilliant Brains"}),(0,l.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,l.jsx)("link",{rel:"icon",href:"/faviconimg.png"})]}),(j||T||E)&&(0,l.jsx)(x.Z,{modalOpen:!0}),(0,l.jsxs)("div",{className:"p-4 py-12 sm:px-12 h-full overflow-y-auto",children:[(0,l.jsxs)("section",{className:"pb-10 border-b",children:[(0,l.jsx)("h1",{className:"text-2xl text-black/70 font-argentinum mb-6",children:"Hero Section"}),(0,l.jsxs)("form",{className:"flex flex-col gap-4",onSubmit:z,children:[(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("label",{htmlFor:"header",className:"text-black/70",children:"Header"}),(0,l.jsx)("input",{minLength:35,maxLength:45,required:!0,onChange:e=>k({type:"hero",payload:{...N.hero,header:e.target.value}}),value:null==N?void 0:null===(e=N.hero)||void 0===e?void 0:e.header,type:"text",name:"header",id:"header",className:"border border-black/20 rounded-md p-2"})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("label",{htmlFor:"text",className:"text-black/70",children:"Text"}),(0,l.jsx)("textarea",{minLength:200,maxLength:450,rows:3,required:!0,onChange:e=>k({type:"hero",payload:{...N.hero,text:e.target.value}}),value:null==N?void 0:null===(a=N.hero)||void 0===a?void 0:a.text,name:"text",id:"text",className:"border border-black/20 rounded-md p-2"})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("span",{className:"text-black/70",children:"Image"}),(null==N?void 0:null===(t=N.hero)||void 0===t?void 0:t.image)&&(0,l.jsx)(g(),{width:100,height:100,src:null==N?void 0:null===(n=N.hero)||void 0===n?void 0:n.image,alt:"",className:"h-24 w-24 bg-gray-100 object-cover z-10 relative"}),(0,l.jsx)("input",{type:"file",name:"image",id:"image",className:"",onChange:e=>_(e.target.files[0])})]}),(0,l.jsx)("div",{className:"flex items-center gap-4",children:(0,l.jsx)(d.Z,{type:"submit",className:"text-white px-4 sm:px-6 py-2 rounded-xl text-sm",children:"Update"})})]})]}),(0,l.jsxs)("section",{className:"py-10 border-b",children:[(0,l.jsx)("h1",{className:"text-2xl text-black/70 font-argentinum mb-6",children:"About Section"}),(0,l.jsxs)("form",{className:"flex flex-col gap-4",onSubmit:q,children:[(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("label",{htmlFor:"header",className:"text-black/70",children:"Header"}),(0,l.jsx)("input",{minLength:35,maxLength:45,required:!0,onChange:e=>k({type:"about",payload:{...N.about,header:e.target.value}}),value:null==N?void 0:null===(i=N.about)||void 0===i?void 0:i.header,type:"text",name:"header",id:"header",className:"border border-black/20 rounded-md p-2"})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("label",{htmlFor:"text",className:"text-black/70",children:"Text"}),(0,l.jsx)("textarea",{minLength:200,maxLength:450,rows:3,required:!0,onChange:e=>k({type:"about",payload:{...N.about,text:e.target.value}}),value:null==N?void 0:null===(p=N.about)||void 0===p?void 0:p.text,name:"text",id:"text",className:"border border-black/20 rounded-md p-2"})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("span",{className:"text-black/70",children:"Image"}),(null==N?void 0:null===(f=N.about)||void 0===f?void 0:f.image)&&(0,l.jsx)(g(),{width:100,height:100,src:null==N?void 0:null===(v=N.about)||void 0===v?void 0:v.image,alt:"",className:"h-24 w-24 bg-gray-100 object-cover z-10 relative"}),(0,l.jsx)("input",{type:"file",name:"image",id:"image",className:"",onChange:e=>F(e.target.files[0])})]}),(0,l.jsx)("div",{className:"flex items-center gap-4",children:(0,l.jsx)(d.Z,{type:"submit",className:"text-white px-4 sm:px-6 py-2 rounded-xl text-sm",children:"Update"})})]})]})]})]})};a.default=(0,i.Z)(f)}},function(e){e.O(0,[1228,3874,5445,4617,4980,8907,5937,4090,6865,1100,4730,9774,2888,179],function(){return e(e.s=2918)}),_N_E=e.O()}]);