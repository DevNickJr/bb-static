(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4494],{832:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/news/[id]",function(){return a(9397)}])},7081:function(e,t,a){"use strict";var l=a(5893);a(7294);let n=e=>{let{children:t,className:a,gradient:n,...s}=e;return(0,l.jsx)("button",{className:"".concat(n||"grad-to-right","  ").concat(a||""),...s,children:t})};t.Z=n},6270:function(e,t,a){"use strict";var l=a(5893),n=a(918),s=a(7294),i=a(6650),o=a(7403),r=a(7632),c=a(1974);let d=e=>{let{height:t,className:a,editorRef:d}=e,[p,u]=(0,s.useState)(!1),[m,g]=(0,s.useState)(null),h=(0,r.Z)(),f=(e,t)=>{g(0),u(!0);let a=(0,i.iH)(o.Z,"images/".concat(h)),l=(0,i.B0)(a,e.blob());return l.on("state_changed",e=>{let t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+t+"% done"),e.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running")}},e=>(u(!1),console.log("error",e),e),async()=>{u(!1);let e=await (0,i.Jt)(l.snapshot.ref);return console.log("File available only at at",e),e}),new Promise((e,t)=>{})};return(0,l.jsxs)(l.Fragment,{children:[p&&(0,l.jsx)(c.Z,{modalOpen:!0}),(0,l.jsx)(n.M,{apiKey:"lfp1sibdc44a0qoqpita2999rwr01nnq7abmtwh1pnhb8boe",onInit:(e,t)=>d.current=t,initialValue:"",init:{images_upload_handler:f,height:t||300,menubar:"file edit view format tools table help",plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","code","help","wordcount","print","paste","importcss","autosave","save","directionality","visualchars","template","codesample","hr","pagebreak","nonbreaking","toc","imagetools","textpattern","noneditable","charmap","quickbars","emoticons"],toolbar:"undo redo | bold italic underline strikethrough | fontselect fontsizeselect formatselect | alignleft aligncenter alignright alignjustify | outdent indent |  numlist bullist | forecolor backcolor removeformat | pagebreak | charmap emoticons | fullscreen  preview save print | insertfile image media template link anchor codesample | ltr rtl",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}})]})};t.Z=d},7403:function(e,t,a){"use strict";var l=a(3977),n=a(6650);let s=(0,l.ZF)({apiKey:"AIzaSyA_RWmWVRuQC-785kQ40sEdwNnz6Yb6sBM",authDomain:"brilliant-brains-7e04f.firebaseapp.com",projectId:"brilliant-brains-7e04f",storageBucket:"brilliant-brains-7e04f.appspot.com",messagingSenderId:"838066145252",appId:"1:838066145252:web:503b26af450ef5b3dd69f1"}),i=(0,n.cF)(s);t.Z=i},1926:function(e,t,a){"use strict";var l=a(7294),n=a(6650),s=a(7403),i=a(7632);let o=()=>{let[e,t]=(0,l.useState)(null),[a,o]=(0,l.useState)(!1),[r,c]=(0,l.useState)(null),[d,p]=(0,l.useState)(null),u=(0,i.Z)(),m=e=>{t(null),c(0),o(!0);let a=(0,n.iH)(s.Z,"images/".concat(u)),l=(0,n.B0)(a,e);l.on("state_changed",e=>{let t=e.bytesTransferred/e.totalBytes*100;switch(c(t),console.log("Upload is "+t+"% done"),e.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running")}},e=>{t(null==e?void 0:e.message),o(!1),console.log("error",e)},()=>{t(null),c(100),o(!1),(0,n.Jt)(l.snapshot.ref).then(e=>{console.log("File available at",e),p(e)})})};return{url:d,uploadImage:m,error:e,progress:r,setError:t,loading:a,setUrl:p}};t.Z=o},9397:function(e,t,a){"use strict";a.r(t);var l=a(5893),n=a(7294),s=a(9008),i=a.n(s),o=a(8705),r=a(2396),c=a(7081),d=a(1163),p=a(3029),u=a(2920),m=a(1974),g=a(1926),h=a(6270),f=a(5675),x=a.n(f);let b={title:"",content:"",image:"",snippet:""},v=()=>{let[e,t]=(0,n.useState)(!1),[a,s]=(0,n.useReducer)((e,t)=>"reset"===t.type?b:"update"===t.type&&"string"!=typeof t.data?{...e,...t.data}:{...e,[t.type]:t.payload},b),{url:r,uploadImage:f,error:v,progress:y,setError:w,loading:j}=(0,g.Z)(),k=(0,n.useRef)(null),N=(0,d.useRouter)(),{id:Z}=N.query,{loading:_,error:C,data:S,post:E}=(0,p.Z)({api:"/news/".concat(Z),method:"PATCH",onSuccess:()=>{var e;(0,u.Am)("news Updated"),s({type:"reset"}),null===(e=k.current)||void 0===e||e.setContent(""),N.push("/admin/news")}}),U=e=>{var t;e.preventDefault(),E({...a,content:null===(t=k.current)||void 0===t?void 0:t.getContent()})};(0,n.useEffect)(()=>{r&&s({type:"image",payload:r})},[r]);let B=(0,n.useCallback)(async()=>{try{var e;t(!0);let a=await fetch("/api/news/".concat(Z)),l=await a.json();if(!a.ok)throw Error(l.message);console.log({data:l}),s({type:"update",data:l}),null===(e=k.current)||void 0===e||e.setContent(l.content)}catch(e){console.log({error:e})}t(!1)},[Z]);return(0,n.useEffect)(()=>{B()},[Z,B]),(0,l.jsxs)(o.Z,{children:[(0,l.jsxs)(i(),{children:[(0,l.jsx)("title",{children:"Brilliant Brains"}),(0,l.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,l.jsx)("link",{rel:"icon",href:"/faviconimg.png"})]}),(e||_||j)&&(0,l.jsx)(m.Z,{modalOpen:!0}),(0,l.jsxs)("div",{className:"p-4 py-12 sm:px-12 h-full overflow-y-auto",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4 justify-between mb-16",children:[(0,l.jsx)("h1",{className:"text-3xl text-black/70 font-argentinum",children:"Edit News"}),(0,l.jsx)(c.Z,{onClick:()=>N.push("/admin/news"),className:"text-white px-4 sm:px-6 py-2 rounded-xl text-sm",children:"View News"})]}),(0,l.jsxs)("form",{className:"flex flex-col gap-4",onSubmit:U,children:[(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("label",{htmlFor:"title",className:"text-black/70",children:"Title"}),(0,l.jsx)("input",{required:!0,onChange:e=>s({type:"title",payload:e.target.value}),value:null==a?void 0:a.title,type:"text",name:"title",id:"title",className:"border border-black/20 rounded-md p-2"})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("label",{htmlFor:"snippet",className:"text-black/70",children:"Snippet"}),(0,l.jsx)("input",{maxLength:120,required:!0,onChange:e=>s({type:"snippet",payload:e.target.value}),value:null==a?void 0:a.snippet,type:"text",name:"snippet",id:"snippet",className:"border border-black/20 rounded-md p-2"})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("label",{htmlFor:"description",className:"text-black/70",children:"Content"}),(0,l.jsx)(h.Z,{editorRef:k,height:500})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("span",{className:"text-black/70",children:"Upload Image"}),(null==a?void 0:a.image)&&(0,l.jsx)(x(),{width:100,height:100,src:null==a?void 0:a.image,alt:"",className:"h-24 w-24 bg-gray-100 object-cover z-10 relative"}),(0,l.jsx)("input",{type:"file",name:"image",id:"image",className:"",onChange:e=>f(e.target.files[0])})]}),(0,l.jsx)("div",{className:"flex items-center gap-4 mt-8",children:(0,l.jsx)(c.Z,{type:"submit",className:"text-white px-4 sm:px-6 py-2 rounded-md text-sm",children:"Update"})})]})]})]})};t.default=(0,r.Z)(v)}},function(e){e.O(0,[1228,3874,5445,4617,4980,8907,5937,4090,6865,1100,918,4730,9774,2888,179],function(){return e(e.s=832)}),_N_E=e.O()}]);